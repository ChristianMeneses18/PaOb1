package com.ayudamos.presentacion;

import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JInternalFrame;
import javax.swing.JTextField;
import javax.swing.JLabel;
import javax.swing.SwingConstants;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import com.ayudamos.enums.EstadoBeneficiario;
import com.ayudamos.enums.Barrio;
import com.toedter.calendar.JDateChooser;

public class AgregarUsuario extends JInternalFrame {

    private static final long serialVersionUID = 1L;
    private JTextField txtCedula;
    private JTextField txtEmail;
    private JTextField txtDireccion;
    private JTextField txtLicencia;
    private JComboBox<String> comboBoxTipo;
    private JComboBox<Barrio> comboBoxBarrio;
    private JComboBox<EstadoBeneficiario> comboBoxEstado;
    private JLabel lblDireccion;
    private JLabel lblFechaNacimiento;
    private JDateChooser dateChooser;
    private JLabel lblBarrio;
    private JLabel lblEstado;
    private JLabel lblLicencia;

    /**
     * Create the frame.
     */
    public AgregarUsuario() {
        setTitle("Alta de Usuario");
        setBounds(100, 100, 583, 514);
        setClosable(false);
        setIconifiable(false);
        setMaximizable(false);
        setResizable(false);
        getContentPane().setLayout(null);

        JLabel lblTitulo = new JLabel("Alta de Usuario");
        lblTitulo.setFont(new Font("Tahoma", Font.PLAIN, 30));
        lblTitulo.setHorizontalAlignment(SwingConstants.CENTER);
        lblTitulo.setBounds(0, 10, 567, 40);
        getContentPane().add(lblTitulo);

        JLabel lblCedula = new JLabel("Cédula:");
        lblCedula.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblCedula.setBounds(10, 60, 100, 30);
        getContentPane().add(lblCedula);

        txtCedula = new JTextField();
        txtCedula.setFont(new Font("Tahoma", Font.PLAIN, 18));
        txtCedula.setBounds(182, 60, 350, 30);
        getContentPane().add(txtCedula);
        txtCedula.setColumns(10);

        JLabel lblEmail = new JLabel("Email:");
        lblEmail.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblEmail.setBounds(10, 100, 100, 30);
        getContentPane().add(lblEmail);

        txtEmail = new JTextField();
        txtEmail.setFont(new Font("Tahoma", Font.PLAIN, 18));
        txtEmail.setBounds(182, 101, 350, 30);
        getContentPane().add(txtEmail);
        txtEmail.setColumns(10);

        JLabel lblTipoUsuario = new JLabel("Tipo de Usuario:");
        lblTipoUsuario.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblTipoUsuario.setBounds(10, 140, 150, 30);
        getContentPane().add(lblTipoUsuario);

        comboBoxTipo = new JComboBox<>(new String[] {"Beneficiario", "Repartidor"});
        comboBoxTipo.setFont(new Font("Tahoma", Font.PLAIN, 18));
        comboBoxTipo.setBounds(182, 140, 150, 30);
        getContentPane().add(comboBoxTipo);

        lblFechaNacimiento = new JLabel("Fecha de Nacimiento:");
        lblFechaNacimiento.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblFechaNacimiento.setBounds(10, 180, 200, 30);
        getContentPane().add(lblFechaNacimiento);

        dateChooser = new JDateChooser();
        dateChooser.setBounds(182, 180, 212, 30);
        getContentPane().add(dateChooser);

        lblDireccion = new JLabel("Dirección:");
        lblDireccion.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblDireccion.setBounds(10, 220, 100, 30);
        getContentPane().add(lblDireccion);

        txtDireccion = new JTextField();
        txtDireccion.setFont(new Font("Tahoma", Font.PLAIN, 18));
        txtDireccion.setBounds(182, 221, 350, 30);
        getContentPane().add(txtDireccion);
        txtDireccion.setColumns(10);

        lblEstado = new JLabel("Estado:");
        lblEstado.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblEstado.setBounds(10, 260, 100, 30);
        getContentPane().add(lblEstado);

        comboBoxEstado = new JComboBox<>(EstadoBeneficiario.values());
        comboBoxEstado.setFont(new Font("Tahoma", Font.PLAIN, 18));
        comboBoxEstado.setBounds(182, 262, 150, 30);
        getContentPane().add(comboBoxEstado);

        lblBarrio = new JLabel("Barrio:");
        lblBarrio.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblBarrio.setBounds(10, 300, 100, 30);
        getContentPane().add(lblBarrio);

        comboBoxBarrio = new JComboBox<>(Barrio.values());
        comboBoxBarrio.setFont(new Font("Tahoma", Font.PLAIN, 18));
        comboBoxBarrio.setBounds(182, 300, 150, 30);
        getContentPane().add(comboBoxBarrio);

        lblLicencia = new JLabel("Número de Licencia:");
        lblLicencia.setFont(new Font("Tahoma", Font.PLAIN, 18));
        lblLicencia.setBounds(10, 340, 200, 30);
        getContentPane().add(lblLicencia);

        txtLicencia = new JTextField();
        txtLicencia.setFont(new Font("Tahoma", Font.PLAIN, 18));
        txtLicencia.setBounds(182, 340, 250, 30);
        getContentPane().add(txtLicencia);
        txtLicencia.setColumns(10);

        // Add action listener to JComboBox to handle visibility changes
        comboBoxTipo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                actualizarCamposVisibles();
            }
        });

        actualizarCamposVisibles();
    }

    private void actualizarCamposVisibles() {
        String tipoUsuario = (String) comboBoxTipo.getSelectedItem();
        boolean esBeneficiario = "Beneficiario".equals(tipoUsuario);

        lblDireccion.setVisible(esBeneficiario);
        txtDireccion.setVisible(esBeneficiario);

        lblFechaNacimiento.setVisible(esBeneficiario);
        dateChooser.setVisible(esBeneficiario);

        lblBarrio.setVisible(esBeneficiario);
        comboBoxBarrio.setVisible(esBeneficiario);

        lblEstado.setVisible(esBeneficiario);
        comboBoxEstado.setVisible(esBeneficiario);

        lblLicencia.setVisible(!esBeneficiario);
        txtLicencia.setVisible(!esBeneficiario);
        
        if (!esBeneficiario) {
            lblLicencia.setBounds(10, 180, 200, 30);
            txtLicencia.setBounds(182, 180, 250, 30);
        }
        revalidate();
        repaint();
    }
}
