package com.ayudamos.presentacion;

import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JInternalFrame;
import javax.swing.JTextField;
import javax.swing.JLabel;
import java.awt.Font;
import javax.swing.SwingConstants;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import com.toedter.calendar.JDateChooser;
import com.ayudamos.enums.Barrio;
import com.ayudamos.enums.EstadoBeneficiario;
import com.jgoodies.forms.layout.FormLayout;
import com.jgoodies.forms.layout.ColumnSpec;
import com.jgoodies.forms.layout.RowSpec;
import com.jgoodies.forms.layout.FormSpecs;

public class AgregarUsuario extends JInternalFrame {

	private static final long serialVersionUID = 1L;
	private JTextField txtCedula;
    private JTextField txtEmail;
    private JTextField txtDireccion;
    private JTextField txtLicencia;
    private JComboBox<String> comboBoxTipo;
    private JDateChooser dateChooser;
    private JComboBox<Barrio> comboBoxBarrio;
    private JComboBox<EstadoBeneficiario> comboBoxEstado;
    private JLabel lblDireccion;
    private JLabel lblFechaNacimiento;
    private JLabel lblBarrio;
    private JLabel lblEstado;
    private JLabel lblLicencia;

	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					AgregarUsuario frame = new AgregarUsuario();
					frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the frame.
	 */
	public AgregarUsuario() {
		setTitle("Alta de Usuario");
		setBounds(100, 100, 503, 594);
		getContentPane().setLayout(new FormLayout(
            new ColumnSpec[] {
                ColumnSpec.decode("238px"),
                ColumnSpec.decode("38px"),
                ColumnSpec.decode("211px"),},
            new RowSpec[] {
                FormSpecs.UNRELATED_GAP_ROWSPEC,
                RowSpec.decode("37px"),
                FormSpecs.UNRELATED_GAP_ROWSPEC,
                RowSpec.decode("20px"),
                FormSpecs.UNRELATED_GAP_ROWSPEC,
                RowSpec.decode("22px"),
                RowSpec.decode("24px"),
                RowSpec.decode("22px"),
                RowSpec.decode("31px"),
                RowSpec.decode("23px"),
                FormSpecs.PARAGRAPH_GAP_ROWSPEC,
                RowSpec.decode("20px"),
                RowSpec.decode("max(5dlu;default)"),
                RowSpec.decode("24px"),
                FormSpecs.RELATED_GAP_ROWSPEC,
                RowSpec.decode("27px"),}));

        // Title
        JLabel lblTitulo = new JLabel("Alta de Usuario", SwingConstants.CENTER);
        lblTitulo.setFont(new Font("Tahoma", Font.PLAIN, 30));
        getContentPane().add(lblTitulo, "1, 2, 3, 1, fill, top");

        // Cedula
        JLabel lblCedula = new JLabel("Cedula:");
        lblCedula.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblCedula, "1, 4, center, fill");

        txtCedula = new JTextField();
        txtCedula.setFont(new Font("Tahoma", Font.PLAIN, 18));
        txtCedula.setToolTipText("Ingrese la cédula del usuario");
        getContentPane().add(txtCedula, "3, 4, left, fill");
        txtCedula.setColumns(10);

        // Email
        JLabel lblEmail = new JLabel("Email:");
        lblEmail.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblEmail, "1, 6, center, top");

        txtEmail = new JTextField();
        txtEmail.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(txtEmail, "3, 6, left, fill");
        txtEmail.setColumns(10);

        // Tipo de Usuario
        JLabel lblTipoUsuario = new JLabel("Tipo de Usuario");
        lblTipoUsuario.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblTipoUsuario, "1, 8, center, top");

        comboBoxTipo = new JComboBox<>(new String[] {"Beneficiario", "Repartidor"});
        comboBoxTipo.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(comboBoxTipo, "3, 8, left, fill");

        // Fecha de Nacimiento
        lblFechaNacimiento = new JLabel("Fecha de Nacimiento:");
        lblFechaNacimiento.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblFechaNacimiento, "1, 12, center, center");

        dateChooser = new JDateChooser();
        getContentPane().add(dateChooser, "3, 12, fill, top");

        // Direccion
        lblDireccion = new JLabel("Dirección:");
        lblDireccion.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblDireccion, "1, 10, center, center");

        txtDireccion = new JTextField();
        txtDireccion.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(txtDireccion, "3, 10, left, fill");
        txtDireccion.setColumns(10);

        // Estado
        lblEstado = new JLabel("Estado:");
        lblEstado.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblEstado, "1, 14, center, center");

        comboBoxEstado = new JComboBox<>(EstadoBeneficiario.values());
        comboBoxEstado.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(comboBoxEstado, "3, 14, left, fill");

        // Barrio
        lblBarrio = new JLabel("Barrio:");
        lblBarrio.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblBarrio, "1, 16, center, top");

        comboBoxBarrio = new JComboBox<>(Barrio.values());
        comboBoxBarrio.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(comboBoxBarrio, "3, 16, left, fill");

        // Número de Licencia
        lblLicencia = new JLabel("Número de Licencia:");
        lblLicencia.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(lblLicencia, "1, 18, center, center");

        txtLicencia = new JTextField();
        txtLicencia.setFont(new Font("Tahoma", Font.PLAIN, 18));
        getContentPane().add(txtLicencia, "3, 18, left, fill");
        txtLicencia.setColumns(10);

        // Add action listener to JComboBox to handle visibility changes
        comboBoxTipo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                actualizarCamposVisibles();
            }
        });

        // Initialize visibility based on default selection
        actualizarCamposVisibles();
	}
	
	private void actualizarCamposVisibles() {
        String tipoUsuario = (String) comboBoxTipo.getSelectedItem();
        boolean esBeneficiario = "Beneficiario".equals(tipoUsuario);

        lblDireccion.setVisible(esBeneficiario);
        txtDireccion.setVisible(esBeneficiario);

        lblFechaNacimiento.setVisible(esBeneficiario);
        dateChooser.setVisible(esBeneficiario);

        lblBarrio.setVisible(esBeneficiario);
        comboBoxBarrio.setVisible(esBeneficiario);

        lblEstado.setVisible(esBeneficiario);
        comboBoxEstado.setVisible(esBeneficiario);

        lblLicencia.setVisible(!esBeneficiario);
        txtLicencia.setVisible(!esBeneficiario);

        revalidate(); 
        repaint(); 
    }
}
