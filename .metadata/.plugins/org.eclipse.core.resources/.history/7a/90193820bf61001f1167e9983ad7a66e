package com.ayudamos.presentacion;

import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;
import com.toedter.calendar.JDateChooser;
import com.ayudamos.enums.Barrio;
import com.ayudamos.enums.EstadoBeneficiario;
import java.awt.BorderLayout;
import java.awt.GridLayout;

public class AgregarUsuario extends JFrame {

	private static final long serialVersionUID = 1L;
	private JTextField txtCedula;
    private JTextField txtEmail;
    private JTextField txtDireccion;
    private JTextField txtLicencia;
    private JComboBox<String> comboBoxTipo;
    private JDateChooser dateChooser;
    private JComboBox<Barrio> comboBoxBarrio;
    private JComboBox<EstadoBeneficiario> comboBoxEstado;
    private JLabel lblDireccion;
    private JLabel lblFechaNacimiento;
    private JLabel lblBarrio;
    private JLabel lblEstado;
    private JLabel lblLicencia;
    private JPanel panelCentro;
    private JPanel panelSur;

	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				try {
					AgregarUsuario frame = new AgregarUsuario();
					frame.setVisible(true);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		});
	}

	/**
	 * Create the frame.
	 */
	public AgregarUsuario() {
		setTitle("Alta de Usuario");
		setBounds(100, 100, 500, 400);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		getContentPane().setLayout(new BorderLayout());

		// Título
		JLabel lblTitulo = new JLabel("Alta de Usuario", SwingConstants.CENTER);
		lblTitulo.setFont(lblTitulo.getFont().deriveFont(30f));
		getContentPane().add(lblTitulo, BorderLayout.NORTH);

		// Panel para los campos de entrada
		panelCentro = new JPanel();
		panelCentro.setLayout(new GridLayout(0, 2, 10, 10));
		getContentPane().add(panelCentro, BorderLayout.CENTER);

		// Cedula
		JLabel lblCedula = new JLabel("Cedula:");
		lblCedula.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblCedula);

		txtCedula = new JTextField();
		panelCentro.add(txtCedula);

		// Email
		JLabel lblEmail = new JLabel("Email:");
		lblEmail.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblEmail);

		txtEmail = new JTextField();
		panelCentro.add(txtEmail);

		// Tipo de Usuario
		JLabel lblTipoUsuario = new JLabel("Tipo de Usuario:");
		lblTipoUsuario.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblTipoUsuario);

		comboBoxTipo = new JComboBox<>(new String[] {"Beneficiario", "Repartidor"});
		panelCentro.add(comboBoxTipo);

		// Fecha de Nacimiento
		lblFechaNacimiento = new JLabel("Fecha de Nacimiento:");
		lblFechaNacimiento.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblFechaNacimiento);

		dateChooser = new JDateChooser();
		panelCentro.add(dateChooser);

		// Direccion
		lblDireccion = new JLabel("Dirección:");
		lblDireccion.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblDireccion);

		txtDireccion = new JTextField();
		panelCentro.add(txtDireccion);

		// Estado
		JLabel lblEstado = new JLabel("Estado:");
		lblEstado.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblEstado);

		comboBoxEstado = new JComboBox<>(EstadoBeneficiario.values());
		panelCentro.add(comboBoxEstado);

		// Barrio
		JLabel lblBarrio = new JLabel("Barrio:");
		lblBarrio.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblBarrio);

		comboBoxBarrio = new JComboBox<>(Barrio.values());
		panelCentro.add(comboBoxBarrio);

		// Número de Licencia
		lblLicencia = new JLabel("Número de Licencia:");
		lblLicencia.setHorizontalAlignment(SwingConstants.RIGHT);
		panelCentro.add(lblLicencia);

		txtLicencia = new JTextField();
		panelCentro.add(txtLicencia);

		// Panel para los botones
		panelSur = new JPanel();
		getContentPane().add(panelSur, BorderLayout.SOUTH);
		JButton btnGuardar = new JButton("Guardar");
		panelSur.add(btnGuardar);
		JButton btnCancelar = new JButton("Cancelar");
		panelSur.add(btnCancelar);

		// Add action listener to JComboBox to handle visibility changes
		comboBoxTipo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                actualizarCamposVisibles();
            }
        });

        // Initialize visibility based on default selection
        actualizarCamposVisibles();
	}
	
	private void actualizarCamposVisibles() {
        String tipoUsuario = (String) comboBoxTipo.getSelectedItem();
        boolean esBeneficiario = "Beneficiario".equals(tipoUsuario);

        lblDireccion.setVisible(esBeneficiario);
        txtDireccion.setVisible(esBeneficiario);

        lblFechaNacimiento.setVisible(esBeneficiario);
        dateChooser.setVisible(esBeneficiario);

        lblBarrio.setVisible(esBeneficiario);
        comboBoxBarrio.setVisible(esBeneficiario);

        lblEstado.setVisible(esBeneficiario);
        comboBoxEstado.setVisible(esBeneficiario);

        lblLicencia.setVisible(!esBeneficiario);
        txtLicencia.setVisible(!esBeneficiario);

        revalidate(); 
        repaint(); 
    }
}
